{"version":3,"file":"static/webpack/static/development/pages/index.js.fd1f61b02d7c05060ce4.hot-update.js","sources":["webpack:///./src/helpers/preloadPicture.js"],"sourcesContent":["import React from 'react'\nimport * as svg from '../assets/placeholder/index'\nimport { camelCase } from 'lodash'\nimport VisibilitySensor from 'react-visibility-sensor'\n\nconst loadPicture = Component =>\n  class LoadPicture extends React.Component {\n    unmounted = false\n    state = {\n      loaded: false,\n      picture: undefined,\n    }\n    constructor(props) {\n      super(props)\n      // if (props.project.picture.indexOf('webm') > -1) {\n      //   this.state = {\n      //     picture: `/static/screenshots/${this.props.project.picture}.svg`\n      //   }\n      // } else {\n      this.state = {\n        picture: svg[camelCase(this.props.project.picture + '.svg')],\n      }\n      // }\n    }\n    onImageLoaded = imageName => {\n      if (this.unmounted) {\n        return\n      }\n      this.setState({\n        picture: `/static/screenshots/${this.props.project.picture}`,\n        loaded: true,\n      })\n    }\n    componentWillUnmount = () => {\n      this.unmounted = true\n      if (this.image) {\n        this.image.onload = undefined\n        this.image = undefined\n      }\n    }\n    preloadImage = picture => {\n      if (!process.browser) {\n        return null\n      }\n      this.image = new Image()\n      this.image.onload = () => this.onImageLoaded(picture)\n      this.image.src = `/static/screenshots/${picture}`\n    }\n    onChange = isVisible => {\n      if (isVisible && !this.state.loaded) {\n        this.preloadImage(this.props.project.picture)\n      }\n    }\n    render = () => (\n      <VisibilitySensor\n        onChange={this.onChange}\n        minTopValue={120}\n        partialVisibility\n      >\n        <Component {...this.props} picture={this.state.picture} />\n      </VisibilitySensor>\n    )\n  }\n\nexport default loadPicture\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAPA;AACA;AADA;AAHA;AACA;AAFA;AACA;AAGA;AAaA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AArBA;AAsBA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AA5BA;AA6BA,uBAEA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AApCA;AAqCA;AACA;AACA;AACA;AACA;AAzCA;AAyCA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AACA;AAnCA;AACA;AACA;AAFA;AAPA;AAWA;AACA;AAnBA;AAAA;AAAA;AAAA;AACA;AA0DA;;;;A","sourceRoot":""}